#!/bin/bash

FILE_SIZE=1728640
RUN_COUNT=1000
INSTANCES=10
LEECH_COUNT=1
PASSIVE_COUNT=0
LATENCY=5
JITTER=10
BANDWIDTH=100
PARALLEL_GEN=100
TESTCASE=ipfs-transfer

source ./exec.sh

run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH
LEECH_COUNT=2
docker rm -f testground-redis
run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH
LEECH_COUNT=5
docker rm -f testground-redis
run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH
LEECH_COUNT=9
docker rm -f testground-redis
run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH
# BANDWIDTH=150
# INSTANCES=7
# LEECH_COUNT=1
# run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH

cd ..
python ../process.py --plots wants