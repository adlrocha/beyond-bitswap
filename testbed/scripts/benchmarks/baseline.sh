#!/bin/bash

RUNNER="local:docker"
BUILDER="docker:go"

echo "Starting random files test"
FILE_SIZE=15728640,31457280,47185920,57671680,104857600
RUN_COUNT=1
INSTANCES=50
LEECH_COUNT=1
PASSIVE_COUNT=0
LATENCY=5
JITTER=10
BANDWIDTH=100
PARALLEL_GEN=100
TESTCASE=ipfs-transfer
INPUT_DATA=random
DATA_DIR=../extra/inputData
TCP_ENABLED=true

source ./exec.sh

run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH $INPUT_DATA $DATA_DIR $TCP_ENABLED

echo "Starting real files test"
INPUT_DATA=FILE_SIZE
DATA_DIR=../extra/inputData
TCP_ENABLED=false

source ./exec.sh

run $TESTCASE $INSTANCES $FILE_SIZE $RUN_COUNT $LATENCY $JITTER $PARALLEL_GEN $LEECH_COUNT $BANDWIDTH $INPUT_DATA $DATA_DIR $TCP_ENABLED

#TODO: Add tests modifying bandwidth and latency.